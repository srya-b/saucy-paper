\documentclass[acmsmall, screen, review, anonymous]{acmart}
%\IEEEoverridecommandlockouts
% The preceding line is only needed to identify funding in the first footnote. If that is unneeded, please comment it out.
%\usepackage[dvipsnames]{xcolor}
%\usepackage{cite}
\usepackage[most]{tcolorbox}
%\usepackage{amsmath,amssymb,amsfonts,amsthm}
\usepackage{algorithmic}
\usepackage{graphicx}
\usepackage{subcaption}
\usepackage{textcomp}
\usepackage{mathtools}
\usepackage[shortlabels]{enumitem}
\usepackage[T1]{fontenc}
\usepackage{listings}
\usepackage{tabularx}
\usepackage{bbm}
%\usepackage{unicode-math}
\usepackage[utf8]{inputenc}
\usepackage{newunicodechar}
\usepackage{multirow}
\usepackage{booktabs}

%% PL packages
\usepackage{stmaryrd} 
\usepackage{proof}
\usepackage{mathpartir}
%\usepackage{color}
\usepackage{xstring}
\usepackage{xspace}
\usepackage{turnstile}

\def\BibTeX{{\rm B\kern-.05em{\sc i\kern-.025em b}\kern-.08em
    T\kern-.1667em\lower.7ex\hbox{E}\kern-.125emX}}
\begin{document}
\usetikzlibrary{matrix, arrows.meta, calc, positioning}
\tikzset{myarrow/.style={-Latex, rounded corners},}

\newcommand*\emptycirc[1][1ex]{\tikz\draw (0,0) circle (#1);} 
\newcommand*\halfcircleft[1][1ex]{%
  \begin{tikzpicture}
  \draw[fill] (0,0)-- (90:#1) arc (90:270:#1) -- cycle ;
  \draw (0,0) circle (#1);
  \end{tikzpicture}}

\newcommand*\halfcircright[1][1ex]{%
  \begin{tikzpicture}
  \draw[fill] (0,0)-- (0:#1) arc (0:90:#1) -- cycle ;
  \draw[fill] (0,0)-- (270:#1) arc (270:360:#1) -- cycle;
  \draw (0,0) circle (#1);
  \end{tikzpicture}}
\newcommand*\fullcirc[1][1ex]{\tikz\fill (0,0) circle (#1);} 


\definecolor{vert}{RGB}{0,181,0}
\definecolor{oran}{RGB}{223,74,0}
\definecolor{viol}{RGB}{134,0,175}
\definecolor{roug}{RGB}{215,15,0}
\definecolor{bb}{RGB}{0,0,0}
\definecolor{gg}{RGB}{220,220,220}
\definecolor{royalblue}{rgb}{0.25, 0.41, 0.88}
\definecolor{forestgreen}{rgb}{0.13, 0.55, 0.13}
\definecolor{YellowOrange}{rgb}{0.98, 0.6, 0.01}
\definecolor{Red}{rgb}{0.89, 0.0, 0.13}
\definecolor{Black}{rgb}{0.0, 0.0, 0.0}
\definecolor{Purple}{rgb}{0.63, 0.36, 0.94}

\newcommand{\anote}[1]{{\color{magenta}{AM: {{#1}}}}}

\newtcolorbox[auto counter]{bbox}[2][]{%
    colback=white,
    colframe=bb,
    %colbacktitle=white!90!roug,
	colbacktitle=white!40!gg,
    coltitle=black,
    fonttitle=\small\bfseries, 
	fontupper=\small,
	fontlower=\small,
    enhanced,
    attach boxed title to top left={yshift=-2mm, xshift=0.5cm},%
    #1,% For possible options
}

\mathchardef\hyp="2D
\mathchardef\car="5E

\makeatletter
\newcommand\BeraMonottFamily{%
	\def\fvm@scale{0.85}%
	\fontfamily{fvm}\selectfont
}
\makeatother

\title{Nomos-UC: a programming framework for cryptography based on resource-aware session types\\
%\thanks{Identify applicable funding agency here. If none, delete this.}
}

\input{macros}
\input{st-macros}

\begin{abstract}
Universal Composability (UC) is a leading framework for modeling secure protocols in cryptography and in security more broadly.
In this work we continue a recent line of work on bringing a formal semantics to the UC framework.
Our approach is to investigate adding session types to UC, as a way of annotating ideal functionality definitions with with additional structure.
We build a new language, Nomos-UC, by combining an existing session-type language Nomos with ILC, an encoding of UC as a process calculus.
This requires solving a range of technical challenges, most notably combining the linear notion of session types with the inherently flexible communication model featured in UC.
Additionally, we make use of the resource-aware typs in Nomos to enforce polynomial runtime guarantees.
In contrast with prior work, we faithfully model the versatile ``import tokens,'' mechanism from UC, so we can represent polynomial time without having to take extra restrictions.
To validate our design, we work through the standard theory of UC composition operators, and complete a modular application case study, building a coin tossing protocol in the random oracle model using commitments as an intermediate layer.

\end{abstract}

\maketitle


%\begin{IEEEkeywords}
%component, formatting, style, styling, insert
%\end{IEEEkeywords}

\section{Introduction}
\input{sections/intro}

\section{Background} \label{sec:background}
\input{sections/background}

\section{A Commitment Protocol in NomosUC} \label{sec:example}
\input{sections/example}

\section{Base System of Session Types in NomosUC} \label{sec:basic}
\input{sections/baselang}

\section{Import and Potential in NomosUC} \label{sec:import}
\input{sections/importlang}

\section{Related Works}
\input{sections/relatedworks}

%\section{Import}
%\input{sections/import}

\section{The UC Experiment} \label{sec:execuc}
\input{sections/execuc}

\section{Coin Flipping and Commitment} \label{sec:commitment}
\input{sections/commitment}

\section{Discussion and Future Work}
\input{sections/future}

\section*{References}
%\bibliographystyle{ACM-Reference-Format}
%\bibliography{nomosuc}

%input{figures/asyncwrapper}

\appendix

\todo{Appendix todos:
\begin{itemize}
\item full dumy lemma
\item simulator composition operator
\item multisession extension greater detail and bangppt theorem
\item squas part of multisession
\item how to change import to work with Nomos sending max every time
\item code for composed simulator
\end{itemize}}

\section{The Functionality Wrapper} \label{app:fwrapper}
\input{appendix/fwrapper}

\section{Dummy Lemma} \label{app:dummy}
\input{appendix/dummylemma}

\section{Multisession Theorems} \label{app:ms}
\input{appendix/bangf}

\section{Import} \label{app:import}
\input{appendix/import}

%\section{Simulator Composition} \label{app:simcomp}
%\input{appendix/simcomp}

%\section{Proofs}
%\input{sections/brachaproof}

%\input{sections/enoughimport}

\pagebreak

%\begin{figure}
%\input{figures/fasync}
%\end{figure}

%\begin{figure}
%\input{figures/frbc}
%\end{figure}

%\begin{figure}
%\input{figures/protbracha}
%\end{figure}
%
%\begin{figure}
%\input{figures/simbrachaasync}
%\end{figure}
%
%\begin{figure}
%\begin{subfigure}{\columnwidth}
%\input{figures/algopoll}
%\end{subfigure}
%%\begin{subfigure}{\columnwidth}
%%\input{figures/algosimgetleaks}
%%\end{subfigure}
%\begin{subfigure}{\columnwidth}
%\input{figures/algosimpartyout}
%\end{subfigure}
%\end{figure}
%
%
%\input{figures/F_state}


\end{document}
