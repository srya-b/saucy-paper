\begin{bbox}[title={$\mathcal{F}_\msf{Atomic}$}]

Initialize: $\msf{BC} \leftarrow \emptyset$

\OnInput \inmsg{tx} from $P_i$:

    \quad \Leak (\msf{tx}, \Partyi) and \Eventually:
    
    	\qquad {\color{Blue} Append \msf{tx} to \msf{BC}, $\msf{pos} \leftarrow |\msf{BC}|$}
    	
    	\qquad {\color{Blue} For each $P_j$:}
    	    
    	    \qqquad {\color{Blue} \Leak (\msf{pos}, $P_j$) and \Eventually:}

			\qqqquad {\color{Red} send $\msf{BC}[1:\msf{pos}]$ to $P_j$}
	
	\quad \Send Ok $\rightarrow P_i$
    
        
\end{bbox}
